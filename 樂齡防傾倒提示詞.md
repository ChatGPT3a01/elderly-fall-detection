⭐《樂齡防傾倒 LINE Bot 通知系統》最終優化提示詞（工程版）

請協助我建立一套 樂齡防傾倒監測系統，使用地端攝影機偵測使用者姿勢，並於出現「異常傾斜」時透過 LINE Bot 自動發送通知。

🎯 系統目標

利用地端攝影機擷取畫面 → 進行骨架辨識（pose estimation）→ 計算身體傾斜度 → 若超標 → 自動發送 LINE Bot 警示訊息。

📌 功能需求
1️⃣ 地端攝影機即時影像處理

開啟本地端攝影機（OpenCV / MediaPipe / TensorFlow.js 皆可）

必須能辨識出：

頭部節點

手部節點（左右手）

四肢節點（肩、肘、膝、腳踝）

結構需為 骨架線段模型（每個節點要畫出相連的線）

2️⃣ 傾斜度運算邏輯（防跌倒核心）

必須：

使用相鄰節點形成「向量」或「線段」

計算每條線段相對地面的 斜率 / 角度

設定「一般狀態」的角度容許範圍（例如：人體軀幹 0～20°）

若角度超過安全閾值（例如 35° 以上）
→ 判定為 異常傾斜（可能跌倒）

需提供：

計算角度公式

臨界值設定（可調）

異常偵測邏輯（多節點 cross-check）

3️⃣ 異常狀態判斷（Trigger）

以下任一條件成立 → 視為跌倒可能：

軀幹線段角度 > 閾值

頭部高度突然下降

身體中心點大幅偏移（可用三角形重心法）

當觸發異常時：
→ 呼叫後端 API
→ 發送 LINE Bot 通知

4️⃣ LINE Bot 通知功能

LINE Bot 需：

傳送警告文字：「偵測到可能跌倒，請立即查看！」

可附加：

當下畫面截圖（可選）

時間戳記

危險程度（輕微／嚴重）

需提供 LINE Bot：

Channel Access Token

Channel Secret

Push Message API 寫法（Python 或 Node.js）

📂 系統架構需求

提供完整專案架構，例如：

/pose_detection
   detector.py / index.js
   utils/
       angle_calc.py
/line_bot
   bot.py / bot.js
app.py (主程式)
config.json

🧠 技術建議（由 AI 自行選擇最佳方案）

你可根據準確度與簡易度，自行選擇以下任一套件：

MediaPipe Pose（推薦）

TensorFlow MoveNet

OpenPose（但較重）

系統必須：

每秒至少 10 FPS（可接受）

支援即時穩定輸出角度

🚀 最終輸出內容（依序提供）

完整系統架構設計

偵測骨架的核心程式碼（含可視化線條）

傾斜角度判斷公式與程式實作

異常偵測主邏輯（含防誤判機制）

LINE Bot 推播程式碼（Python / Node.js 兩版本）

整合後可直接執行的主程式（含環境需求）

安裝與執行教學